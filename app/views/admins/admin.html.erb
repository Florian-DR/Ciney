<h1>Ta page d'aministration </h1>

    <div class="admin-table">

    <%############## SAISON ##############%>

    <%### Headers of the table for the saisons ###%>
        <div class="saison-header headers">Saisons</div>
        <div class="headers"><%= @gite_1.name %></div>
        <div class="headers"><%= @gite_2.name %></div>

    <%### Sub-headers of the table for the saisons ###%>
        <div class="sub-headers">Nom</div>
        <div class="sub-headers dates">Dates de début</div>
        <div class="sub-headers dates">Dates de fin</div>
        <div class="sub-headers saisons-prix">
            <div>Semaine</div>
            <div>Week-end</div>
        </div>
        <div class="sub-headers saisons-prix">            
            <div>Semaine</div>
            <div>Week-end</div>
        </div>


    <%### Saisons' table ###%>
        <% unless @saisons.empty? %>
            <% @saisons.each do |saison| %>

                <div class="saison-name">
                    <%= saison.name %>            
                    <%= link_to saison_path(saison), data: {turbo_method: :delete, turbo_confirm: "Es-tu sûr de vouloir supprimer cette saison ?"}, class: "text-danger" do %>
                        <i class="fa-solid fa-trash"></i>
                    <% end %>
                </div>

                <div><%= saison.start_date %></div>
                <div><%= saison.end_date %></div>

            <%# rendering prices from partial %>
                <div class="prices-table" data-controller="edit-prices"> 
                   <%= render "admins/saison_prices", {saison: saison, gite: @gite_1} %>
                </div>

                <div class="prices-table" data-controller="edit-prices"> 
                   <%= render "admins/saison_prices", {saison: saison, gite: @gite_2} %>
                </div>
                
            <% end %>
        <% end %>
        <hr><hr><hr><hr><hr>

    <%############## HOLIDAYS ##############%>
        
    <%### Headers of the table for the holidays ###%>
        <div class="saison-header headers">Vacances</div>
        <div class="headers"><%= @gite_1.name %></div>
        <div class="headers"><%= @gite_2.name %></div>

    <%### Sub-headers of the table for the holidays ###%>
        <div class="sub-headers">Nom</div>
        <div class="sub-headers dates">Dates de début</div>
        <div class="sub-headers dates">Dates de fin</div>
        <div class="sub-headers prix">Prix</div>
        <div class="sub-headers prix">Prix</div>

    <%### Holidays' table ###%>
        <% unless @holidays.empty? %>
            <% @holidays.each do |holiday| %>
                <div> <%= holiday.name %> </div>
                <div><%= holiday.start_date %></div>
                <div><%= holiday.end_date %></div>
                <div>
                    <% if holiday.price%>
                        <span data-edit-prices-target="priceSemaine" data-action="click->edit-prices#displayFormSemaine"><%= holiday.price %>€</span> 

                        <%= simple_form_for [holiday], html: {class: "d-none", data: {edit_prices_target: "formSemaine", action:"submit->edit-prices#update"}} do |f|%>
                            <%= f.input :price, label:false %>
                        <% end %>

                    <% else %>
                        <%= simple_form_for @holiday do |f|%>
                        <%= f.hidden_field :status, value: "semaine" %>
                        <%= f.hidden_field :gite_id, value: gite.id %>
                        <%= f.input :price, label: false %>
                        <% end %>
                    <% end %>
                </div>
                <div>0</div>
            <% end %>
        <% end %>

    </div>


 <%#####  Adding a new saison #####%>
<div id="forms">
    <div data-controller="saison-form-toggle">
        <div class="btn btn-primary toggle-button" data-action="click->saison-form-toggle#displayForm"> Ajouter une saison</div>
        <%= render "admins/saison_form", {saison: @saison} %>
    </div>

 <%#####  Adding a new holiday #####%>
    <div data-controller="saison-form-toggle">
        <div class="btn btn-primary toggle-button" data-action="click->saison-form-toggle#displayForm"> Ajouter de vacances</div>
        <%= render "admins/holiday_form", {holiday: @holiday} %>
    </div>
</div>